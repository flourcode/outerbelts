<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <title>KATANU ROCK BLASTER</title>
  <!-- Social Sharing Meta Tags -->
 <meta name="description" content="Join Katanu Mining Corp for asteroid mining operations. Competitive compensation packages with 34.8% survival rate.">
 
 <!-- Open Graph Meta Tags (Facebook, LinkedIn) -->
 <meta property="og:title" content="KATANU MINING CORP // JOB TERMINAL">
 <meta property="og:description" content="Apply for asteroid mining jobs with Katanu Mining Corp. Escape Earth's drought and earn credits for your family.">
 <meta property="og:image" content="https://outerbelts.com/katanuposter.png">
 <meta property="og:url" content="https://outerbelts.com">
 <meta property="og:type" content="website">
 
 <!-- Twitter Card Meta Tags -->
 <meta name="twitter:card" content="summary_large_image">
 <meta name="twitter:title" content="KATANU MINING CORP // JOB TERMINAL">
 <meta name="twitter:description" content="Brave pilots needed! Join Katanu Mining Corp with a 34.8% survival rate and earn 214,500 CR.">
 <meta name="twitter:image" content="https://outerbelts.com/katanuposter.png">

  <!-- Pixelify Sans font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pixelify+Sans:wght@400;700&display=swap" rel="stylesheet">
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VY77C2YRSK"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-VY77C2YRSK');
</script>

  <style>
  body,canvas,html{image-rendering:pixelated}.blink,.cursor{animation:1s steps(2,start) infinite blink-animation}#websiteTitle,.gameButton,.window-title{text-transform:uppercase}#finalScore,#highScoreInput,.menu-text,.window-title{text-align:center}#highScoreInput,#highScoreInput:focus{box-shadow:none;border:2px solid #0f380f}#mobile-controls,#uiContainer{left:0;width:100%;pointer-events:none}body,html{margin:0;padding:0;background:#0a0d0a;color:#0f380f;overflow:hidden;font-family:'Pixelify Sans',monospace;image-rendering:crisp-edges}canvas{display:block;background-color:#0a0d0a;width:100%;height:100%;image-rendering:crisp-edges}#highScore,#lives,#score{position:absolute;top:20px;font-size:16px;color:#9bbc0f}#score{left:20px}#highScore{left:50%;transform:translateX(-50%)}#lives{right:20px}#gameMenu{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:100;min-width:300px;max-width:500px}.game-window{border:8px solid #0f380f;background:#9bbc0f;padding:10px;box-shadow:inset 0 0 0 4px #8bac0f,6px 6px 0 rgba(0,30,0,.4)}.window-title{background:#0f380f;color:#9bbc0f;padding:5px 0;margin:-10px -10px 10px;font-size:20px;letter-spacing:2px}.pixel-art-decoration{font-size:16px;margin:5px 0;line-height:1;text-align:center;color:#306230}.menu-text{color:#0f380f;margin:15px 0;font-size:14px;line-height:1.2}@keyframes blink-animation{to{visibility:hidden}}.pixel-divider{display:block;height:4px;background:repeating-linear-gradient(to right,#0f380f 0,#0f380f 4px,#8bac0f 4px,#8bac0f 8px);margin:10px 0}#highScoreInput,.arcade-btn,.gameButton,.mute-button{background:#8bac0f}.cursor{display:inline-block;margin-right:5px}.menu-item{display:flex;align-items:center;justify-content:center;margin:10px 0}.gameButton{padding:8px 16px;font-size:16px;border:3px solid #0f380f;color:#0f380f;cursor:pointer;margin:5px;font-family:'Pixelify Sans',monospace;transition:.2s}.mute-button,.radio-button{padding:0 10px;cursor:pointer;color:#0f380f;font-family:'Pixelify Sans',monospace}#websiteTitle,.mute-button{font-size:14px;position:absolute}.gameButton:hover,.radio-button:hover{background:#306230;color:#9bbc0f}.gameButton:active{transform:translateY(1px)}#uiContainer{position:absolute;top:0;height:100%}#websiteTitle,.arcade-btn,.mute-button{pointer-events:auto}#websiteTitle{top:40px;right:23px;color:#9bbc0f;font-weight:700;letter-spacing:1px}.mute-button{top:70px;left:20px;border:2px solid #0f380f;width:auto;height:30px;z-index:100}#finalScore{font-size:22px;margin:10px 0;color:#0f380f}#highScoreInput{margin:10px 3px;padding:8px;font-size:18px;color:#0f380f;font-family:'Pixelify Sans',monospace;display:block;width:80px;outline:0;-webkit-appearance:none}.highscore-input-container{display:flex;align-items:center;justify-content:center;margin:10px 0;gap:5px}#highScoreInput::placeholder{color:#0f380f;opacity:.8}#highScoreInput:focus{outline:0}#mobile-controls{position:fixed;bottom:0;display:none;z-index:100;padding:10px 0 20px}.arcade-btn{border:3px solid #0f380f;color:#0f380f;width:70px;height:70px;font-size:20px;font-family:'Pixelify Sans',monospace;display:flex;align-items:center;justify-content:center;cursor:pointer;-webkit-tap-highlight-color:transparent;user-select:none;margin:0}.arcade-btn:active,.fire-btn{background-color:#306230}.left-side{position:absolute;bottom:20px;left:20px}.right-side{position:absolute;bottom:20px;right:20px}.fire-btn{width:85px;height:85px}.scanlines{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(to bottom,rgba(0,0,0,0),rgba(0,0,0,0) 50%,rgba(0,0,0,.2) 50%,rgba(0,0,0,0));background-size:100% 4px;z-index:999;pointer-events:none;opacity:.2}@media (max-width:768px){#mobile-controls{display:block}}.radio-button{position:absolute;top:70px;right:20px;background:#8bac0f;border:2px solid #0f380f;width:auto;height:30px;font-size:14px;z-index:100;pointer-events:auto;display:flex;align-items:center;justify-content:center}.radio-icon::after,.radio-icon::before{border-top-left-radius:2px;border-top-right-radius:2px}.radio-icon{display:inline-block;margin-right:5px;width:14px;height:12px;background-color:#0f380f;position:relative}.radio-icon::after,.radio-icon::before{content:"";position:absolute;background-color:#0f380f}.radio-icon::before{width:4px;height:8px;bottom:12px;left:5px}.radio-icon::after{width:8px;height:4px;bottom:20px;left:3px}.radio-wave{position:absolute;width:4px;height:4px;border-top:2px solid #0f380f;border-right:2px solid #0f380f;border-radius:50%;top:-5px;right:-1px;animation:1.5s ease-in-out infinite pulse}.radio-wave:nth-child(2){width:8px;height:8px;top:-7px;right:-3px;animation-delay:.4s}@keyframes pulse{0%,100%{opacity:0}50%{opacity:1}}#leaderboard{margin:10px auto;width:80%;color:#0f380f}.leaderboard-row{display:flex;justify-content:space-between;padding:5px 0;font-family:'Pixelify Sans',monospace;border-bottom:2px dotted #306230}.initials,.rank{flex:1;font-weight:700}.leaderboard-row:last-child{border-bottom:none}.rank{text-align:left}.initials{text-align:center}.score{flex:1;text-align:right}.loading-spinner{display:inline-block;width:20px;height:20px;border:3px solid #306230;border-radius:50%;border-top-color:transparent;animation:1s linear infinite spin;margin:0 auto}@keyframes spin{to{transform:rotate(360deg)}}
  </style>
</head>
<body>
  <div class="scanlines"></div>
<canvas id="gameCanvas"></canvas>
<div id="uiContainer">
  <div id="websiteTitle"><a href="https://outerbelts.com/" style="color: inherit; text-decoration: none;">OUTERBELTS.COM</a></div>
  <!-- Radio button will be added here via JavaScript -->
</div>
  
  <div id="mobile-controls">
    <div class="left-side">
      <button id="leftButton" class="arcade-btn">←</button>
      <button id="rightButton" class="arcade-btn" style="margin-left: 10px;">→</button>
    </div>
    <div class="right-side">
      <button id="thrustButton" class="arcade-btn" style="margin-right: 10px;">▲</button>
      <button id="fireButton" class="arcade-btn fire-btn">FIRE</button>
    </div>
  </div>
  
  <div id="gameMenu">
    <div id="startScreen" class="game-window">
      <div class="window-title">KATANU MINING CORP</div>
      
      <div class="pixel-art-decoration">
        ** WELCOME TO THE OUTER BELTS **
      </div>
      
      <div class="pixel-divider"></div>
      
      <div class="menu-text">
     CLEAR ASTEROID FIELD TO OPEN MINING CORRIDOR.<br><br>FAILURE WILL RESULT IN ALL DEBTS FOR SHIP, FUEL, AND OXYGEN BEING TRANSFERRED TO YOUR NEXT OF KIN.
      </div>
      
      <div class="menu-text">
        ARROW KEYS = MOVE<br>
        SPACEBAR = FIRE LASERS
      </div>
      
      <div class="pixel-divider"></div>
              
      <div class="menu-item">
        <span class="cursor">></span>
        <button id="startButton" class="gameButton">COMPLY</button>
      </div>
    </div>
    
    <div id="gameOverScreen" style="display: none;" class="game-window">
      <div class="window-title">:: NICE JOB, ROOKIE! ::</div>
      
      <div id="finalScore" class="menu-text">SCORE: 0</div>
      
      <div class="pixel-divider"></div>
      
      <div class="menu-text">
        TOP MINERS
      </div>

      <div id="leaderboard">
        <div class="leaderboard-row">
          <div class="rank">1ST</div>
          <div class="initials">---</div>
          <div class="score">0</div>
        </div>
        <div class="leaderboard-row">
          <div class="rank">2ND</div>
          <div class="initials">---</div>
          <div class="score">0</div>
        </div>
        <div class="leaderboard-row">
          <div class="rank">3RD</div>
          <div class="initials">---</div>
          <div class="score">0</div>
        </div>
      </div>
      
      <div class="pixel-divider"></div>
      <div class="menu-text">
        ENTER YOUR INITIALS:
      </div>
      
      <div class="menu-item">
  <span class="cursor">></span>
  <input type="text" id="highScoreInput" maxlength="3" placeholder="AAA" style="text-transform: uppercase;" autocomplete="off" />
</div>
      <div class="menu-item">
        <span class="cursor">></span>
        <button id="shareButton" class="gameButton">POST YOUR SCORE</button>
      </div>
      <div class="menu-item">
        <span class="cursor">></span>
        <button id="restartButton" class="gameButton">PLAY AGAIN</button>
      </div>
    </div>
  </div>
<script>
const COLORS={space:"#0A0D0A",darkest:"#0F380F",medium:"#306230",light:"#8BAC0F",lightest:"#9BBC0F"},GAME_CONFIG={pixelSize:3,initialLives:3,initialAsteroids:5,maxBullets:10,baseLaserRechargeRate:.5,baseDifficulty:1,maxDifficulty:3,difficultyScoreThreshold:2e3,asteroidPointValue:100,shipSpawnProtectionTime:1500},SoundFX={context:null,muted:!1,initialized:!1,ambientHumSound:null,sounds:{laser:{type:"sine",baseFreq:260,freqEnd:140,duration:.06,volume:.6,repeat:3,envelope:{attack:.01,release:.25}},explosion:{type:"triangle",baseFreq:120,freqEnd:50,duration:.6,volume:.6},thrust:{type:"sawtooth",baseFreq:80,filterFreq:140,modFreq:6,volume:.6},menu:{type:"square",baseFreq:660,altFreq:440,duration:.09,volume:.25},gameOver:{type:"square",notes:[196,175,88],duration:.4,volume:.45},levelUp:{notes:[192,494,587,284],duration:.1,volume:.3,type:"square"},welcome:{notes:[659,440,220],duration:.2,volume:.3,type:"square",envelope:{attack:.01,release:.2}},coinInsert:{notes:[330,440],duration:.15,volume:.35,type:"square"},countdown:{frequency:440,type:"sine",duration:.2,volume:.5},finalWave:{frequency:220,type:"square",duration:.3,volume:.6},warp: {
  type: "sine", // Changed from sine to square for more retro sound
  baseFreq: 220,  // Lower starting frequency
  freqEnd: 800,  // Higher ending frequency for more dramatic sweep
  duration: 0.8,  // Longer duration
  volume: 0.5,    // Slightly louder
  envelope: {
    attack: 0.2,  // Slower attack
    release: 0.5  // Longer release
  },
  // Added oscillation parameters for that wobbly sci-fi feel
  oscillation: {
    rate: 2,      // Vibrato rate
    depth: 30     // Vibrato depth
  }
}},init:function(){try{window.AudioContext=window.AudioContext||window.webkitAudioContext,this.context=new AudioContext,this.initialized=!0,this.ambientHumSound=this.playAmbientHum()}catch(e){console.warn("Web Audio API not supported in this browser")}return this},play:function(e,t={}){if(!this.initialized||this.muted)return null;try{"suspended"===this.context.state&&this.context.resume();const a=this.sounds[e];return a?a.notes?this.playNotes(e,t):"explosion"===e?this.explosion(t):"thrust"===e?this.thrust(t):"warp"===e?this.warp(t):this.oscillatorSound(e,t):null}catch(e){return console.warn("Error playing sound:",e),null}},oscillatorSound:function(e,t={}){const a=this.sounds[e],n=t.duration||a.duration,i=t.freq||a.baseFreq,s=t.altFreq||a.altFreq,o=t.up||!1,r=a.repeat||1;for(let e=0;e<r;e++){const t=this.context.createOscillator(),r=this.context.createGain();t.type=a.type||"square",t.frequency.setValueAtTime(o&&s?s:i,this.context.currentTime+e*n),a.freqEnd&&t.frequency.exponentialRampToValueAtTime(a.freqEnd,this.context.currentTime+(e+1)*n),r.gain.setValueAtTime(a.volume,this.context.currentTime+e*n),r.gain.exponentialRampToValueAtTime(.01,this.context.currentTime+(e+1)*n),t.connect(r),r.connect(this.context.destination),t.start(this.context.currentTime+e*n),t.stop(this.context.currentTime+(e+1)*n)}return null},playNotes:function(e,t={}){const a=this.sounds[e],n=a.notes,i=a.duration,s=a.envelope||{attack:.05,release:.1};for(let e=0;e<n.length;e++){if(null===n[e])continue;const t=this.context.createOscillator(),o=this.context.createGain();t.type=a.type||"square",t.frequency.value=n[e];const r=this.context.currentTime+e*i;o.gain.setValueAtTime(0,r),o.gain.linearRampToValueAtTime(a.volume,r+s.attack*i),o.gain.setValueAtTime(a.volume,r+i-s.release*i),o.gain.linearRampToValueAtTime(.01,r+i),t.connect(o),o.connect(this.context.destination),t.start(r),t.stop(r+i)}return null},playAmbientHum:function(){if(!this.initialized||this.muted)return null;const e=this.sounds.ambientHum,t=this.context.createOscillator(),a=this.context.createGain();return t.type=e.type,t.frequency.value=e.baseFreq,a.gain.value=e.volume,t.connect(a),a.connect(this.context.destination),t.start(),{oscillator:t,gain:a,stop:function(){a.gain.exponentialRampToValueAtTime(.001,this.context.currentTime+.5),setTimeout((()=>t.stop()),500)}.bind(this)}},explosion:function(e={}){if(!this.context)return null;const t=this.sounds.explosion,a=e.duration||t.duration,n=e.size||2,i=this.context.createOscillator();i.type=t.type,i.frequency.setValueAtTime(t.baseFreq,this.context.currentTime),i.frequency.exponentialRampToValueAtTime(t.freqEnd,this.context.currentTime+a);const s=this.context.createBiquadFilter();s.type="lowpass",s.frequency.setValueAtTime(1e3/n,this.context.currentTime),s.frequency.exponentialRampToValueAtTime(50,this.context.currentTime+a),s.Q.value=1;const o=this.context.createGain();return o.gain.setValueAtTime(t.volume,this.context.currentTime),o.gain.exponentialRampToValueAtTime(.01,this.context.currentTime+a),i.connect(s),s.connect(o),o.connect(this.context.destination),i.start(),i.stop(this.context.currentTime+a),i},thrust:function(e={}){if(!this.context)return null;const t=this.sounds.thrust,a=this.context.createOscillator();a.type="sawtooth",a.frequency.value=t.baseFreq;const n=this.context.createBiquadFilter();n.type="lowpass",n.frequency.value=t.filterFreq,n.Q.value=5;const i=this.context.createOscillator();i.type="sine",i.frequency.value=t.modFreq;const s=this.context.createGain();s.gain.value=30;const o=this.context.createGain();return o.gain.value=t.volume,i.connect(s),s.connect(a.frequency),a.connect(n),n.connect(o),o.connect(this.context.destination),a.start(),i.start(),{source:a,modulator:i,gain:o,stop:()=>{try{o.gain.exponentialRampToValueAtTime(.001,this.context.currentTime+.2),setTimeout((()=>{a.stop(),i.stop()}),200)}catch(e){console.warn("Error stopping thrust sound",e)}}}},warp:function(e={}){if(!this.context)return null;const t=this.sounds.warp,a=t.duration||.8,n=this.context.createOscillator();n.type=t.type||"square",n.frequency.setValueAtTime(t.baseFreq,this.context.currentTime),n.frequency.exponentialRampToValueAtTime(t.freqEnd,this.context.currentTime+a);if(t.oscillation){const e=this.context.createOscillator(),i=this.context.createGain();e.type="sine",e.frequency.value=t.oscillation.rate||8,i.gain.value=t.oscillation.depth||30,e.connect(i),i.connect(n.frequency),e.start(),e.stop(this.context.currentTime+a)}const i=this.context.createGain();i.gain.setValueAtTime(0,this.context.currentTime),i.gain.linearRampToValueAtTime(t.volume,this.context.currentTime+t.envelope.attack),i.gain.setValueAtTime(t.volume,this.context.currentTime+a-t.envelope.release),i.gain.exponentialRampToValueAtTime(.001,this.context.currentTime+a);const s=this.context.createBiquadFilter();return s.type="bandpass",s.frequency.value=800,s.Q.value=2,s.frequency.linearRampToValueAtTime(1800,this.context.currentTime+a/2),s.frequency.linearRampToValueAtTime(400,this.context.currentTime+a),n.connect(s),s.connect(i),i.connect(this.context.destination),n.start(),n.stop(this.context.currentTime+a),n}},game={active:!1,paused:!1,score:0,lives:GAME_CONFIG.initialLives,highScore:localStorage.getItem("rockBlasterHighScore")||0,difficulty:GAME_CONFIG.baseDifficulty,pixelSize:GAME_CONFIG.pixelSize,lastSpawnTime:0,screenShake:{duration:0,intensity:0,maxDuration:0},laser:{charge:100,maxCharge:100,recharging:!1,chargeRate:GAME_CONFIG.baseLaserRechargeRate,dischargeRate:GAME_CONFIG.baseLaserRechargeRate,lastFireTime:0,canFire:!0},keys:{},lastPodFired:!1,ship:null,asteroids:[],bullets:[],bulletTrails:[],pulsingStars:[],thrusterSound:null,blackHole:{active:!1,x:0,y:0,radius:34,spawnTime:0,cooldown:3e4,duration:2e4},restArea:{active:!1,earthSize:250,prevAsteroids:[],infoBoxShownInSession:!1},reset(){this.score=0,this.lives=GAME_CONFIG.initialLives,this.active=!0,this.paused=!1,this.difficulty=GAME_CONFIG.baseDifficulty,this.laser.charge=this.laser.maxCharge,this.laser.recharging=!1,this.lastSpawnTime=Date.now(),this.bullets=[],this.bulletTrails=[],this.asteroids=[],this.restArea.infoBoxShownInSession=!1,this.ship={x:canvas.width/2,y:canvas.height/2,angle:-Math.PI/2,thrust:{x:0,y:0},invulnerable:!0,blinkState:!0,blinkInterval:setInterval((()=>{this.ship&&(this.ship.blinkState=!this.ship.blinkState)}),150)},setTimeout((()=>{this.ship&&(this.ship.invulnerable=!1,clearInterval(this.ship.blinkInterval),this.ship.blinkState=!0)}),GAME_CONFIG.shipSpawnProtectionTime)},updateDifficulty(){const e=Math.min(GAME_CONFIG.maxDifficulty,GAME_CONFIG.baseDifficulty+Math.floor(this.score/GAME_CONFIG.difficultyScoreThreshold));e>this.difficulty&&(this.difficulty=e,sound.play("levelUp")),this.laser.chargeRate=GAME_CONFIG.baseLaserRechargeRate*(1+.2*(this.difficulty-1))}};function triggerScreenShake(e,t){game.screenShake.intensity=e,game.screenShake.duration=t,game.screenShake.maxDuration=t}const canvas=document.getElementById("gameCanvas"),ctx=canvas.getContext("2d");ctx.imageSmoothingEnabled=!1;const sound=Object.create(SoundFX).init();function init(){resizeCanvas(),window.addEventListener("keydown",(e=>{document.activeElement!==document.getElementById("highScoreInput")&&(game.keys[e.key]=!0)})),window.addEventListener("keyup",(e=>{document.activeElement!==document.getElementById("highScoreInput")&&(game.keys[e.key]=!1)})),window.addEventListener("resize",resizeCanvas),document.getElementById("startButton").addEventListener("click",(()=>{startGame()})),document.getElementById("restartButton").addEventListener("click",(()=>{sound.play("menu",{up:!0}),restartGame()})),document.getElementById("shareButton").addEventListener("click",(()=>{sound.play("menu"),shareScore()}));const e=document.createElement("button");e.id="homeButton",e.className="gameButton",e.textContent="FIND ANOTHER JOB",e.addEventListener("click",(function(){sound.play("menu"),window.location.href="https://outerbelts.com"}));const t=document.createElement("div");t.className="menu-item";const a=document.createElement("span");a.className="cursor",a.textContent=">",t.appendChild(a),t.appendChild(e),document.getElementById("gameOverScreen").appendChild(t);const n=document.getElementById("highScoreInput");n&&(n.addEventListener("keydown",(e=>{e.stopPropagation()})),n.addEventListener("input",(()=>{n.value=n.value.toUpperCase()}))),setupMobileControls(),createPulsingStars(),fetchLeaderboard()}function setupMobileControls(){Object.entries({fireButton:" ",leftButton:"ArrowLeft",rightButton:"ArrowRight",thrustButton:"ArrowUp"}).forEach((([e,t])=>{const a=document.getElementById(e);a.addEventListener("touchstart",(e=>{e.preventDefault(),game.keys[t]=!0})),a.addEventListener("touchend",(e=>{e.preventDefault(),game.keys[t]=!1}))}))}function createPulsingStars(e=30){game.pulsingStars=[];for(let t=0;t<e;t++)game.pulsingStars.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,baseSize:1.5*Math.random()+1,size:0,pulse:.1*Math.random()+.05,phase:Math.random()*Math.PI*2,color:Math.random()>.7?COLORS.light:COLORS.medium})}function resizeCanvas(){const e=canvas.width,t=canvas.height;if(canvas.width=window.innerWidth,canvas.height=window.innerHeight,game.ship&&game.active&&(Math.abs(canvas.width-e)>100||Math.abs(canvas.height-t)>100)&&(game.ship.x=canvas.width/2,game.ship.y=canvas.height/2,createPulsingStars(),game.asteroids.forEach((e=>{e.x>canvas.width+e.size?e.x=e.size:e.x<-e.size&&(e.x=canvas.width-e.size),e.y>canvas.height+e.size?e.y=e.size:e.y<-e.size&&(e.y=canvas.height-e.size)})),game.restArea.active&&game.blackHole.active)){const e=50;game.blackHole.x=Math.min(Math.max(game.blackHole.x,e),canvas.width-e),game.blackHole.y=Math.min(Math.max(game.blackHole.y,e),canvas.height-e)}}function createWarpTransition(){const e=document.createElement("div");e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.zIndex="1000",e.style.pointerEvents="none";const t=document.createElement("canvas");t.width=window.innerWidth,t.height=window.innerHeight,t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.imageRendering="pixelated",e.appendChild(t),document.body.appendChild(e);let a=null;try{if(window.sound&&window.sound.context){const e=window.sound.context,t=e.createGain();t.gain.value=.5,t.connect(e.destination);const n=e.createOscillator();n.type="sine",n.frequency.setValueAtTime(220,e.currentTime),n.frequency.exponentialRampToValueAtTime(660,e.currentTime+.75),n.frequency.exponentialRampToValueAtTime(220,e.currentTime+1.5);const i=e.createOscillator();i.type="triangle",i.frequency.setValueAtTime(110,e.currentTime),i.frequency.exponentialRampToValueAtTime(440,e.currentTime+.75),i.frequency.exponentialRampToValueAtTime(110,e.currentTime+1.5);const s=e.createGain();s.gain.value=.2;const o=e.createGain();o.gain.value=.15;const r=e.createBiquadFilter();r.type="lowpass",r.frequency.setValueAtTime(500,e.currentTime),r.frequency.exponentialRampToValueAtTime(2e3,e.currentTime+.75),r.frequency.exponentialRampToValueAtTime(500,e.currentTime+1.5),r.Q.value=2;const l=e.createBuffer(1,2*e.sampleRate,e.sampleRate),c=l.getChannelData(0);for(let e=0;e<c.length;e++)c[e]=2*Math.random()-1;const m=e.createBufferSource();m.buffer=l;const h=e.createBiquadFilter();h.type="bandpass",h.frequency.setValueAtTime(800,e.currentTime),h.frequency.linearRampToValueAtTime(1200,e.currentTime+.75),h.frequency.linearRampToValueAtTime(600,e.currentTime+1.5),h.Q.value=1.5;const u=e.createGain();u.gain.setValueAtTime(.05,e.currentTime),u.gain.linearRampToValueAtTime(.15,e.currentTime+.75),u.gain.linearRampToValueAtTime(.05,e.currentTime+1.5),n.connect(s),i.connect(o),s.connect(r),o.connect(r),r.connect(t),m.connect(h),h.connect(u),u.connect(t),n.start(),i.start(),m.start(),n.stop(e.currentTime+1.5),i.stop(e.currentTime+1.5),m.stop(e.currentTime+1.5),a={osc1:n,osc2:i,noise:m,masterGain:t}}}catch(e){console.warn("Could not create warp audio:",e)}const n=t.getContext("2d"),i=[COLORS.lightest,COLORS.light,COLORS.medium,COLORS.darkest],s=[];for(let e=0;e<120;e++)s.push({x:Math.random()*t.width,y:Math.random()*t.height,size:Math.floor(3*Math.random())+1,speedX:15*(Math.random()-.5),speedY:15*(Math.random()-.5),color:i[Math.floor(Math.random()*i.length)],delay:10*Math.random(),opacity:.5+.5*Math.random()});let o=0;const r=()=>{n.fillStyle=COLORS.space,n.fillRect(0,0,t.width,t.height);const a=t.width/2,c=t.height/2,m=(h=o/75)<.5?2*h*h:1-Math.pow(-2*h+2,2)/2;var h;const u=.1*o,d=m<.5?2*m:2-2*m,g=Math.min(t.width,t.height)*(.1+2*d),p=1+.02*Math.sin(.2*o);n.save(),n.translate(a,c),n.scale(p,p),n.translate(-a,-c);for(let e=g;e>0;e-=7.5){const t=e/g*(i.length-1),s=Math.floor(t),o=Math.min(s+1,i.length-1),r=t-s,m=l(i[s]),h=l(i[o]),d=Math.floor(m.r*(1-r)+h.r*r),p=Math.floor(m.g*(1-r)+h.g*r),y=Math.floor(m.b*(1-r)+h.b*r);n.fillStyle=`rgb(${d},${p},${y})`;for(let t=0;t<2*Math.PI;t+=Math.PI/36){const i=.15*Math.sin(3*t+u)*Math.sin(.5*u),s=a+Math.cos(t)*e*(1+i),o=c+Math.sin(t)*e*(1+i);n.fillRect(5*Math.floor(s/5)-2.5,5*Math.floor(o/5)-2.5,5,5)}}if(n.restore(),m>.45&&m<.55){const e=m<.5?20*(m-.45):20*(.55-m);n.fillStyle=`rgba(255, 255, 255, ${.3*e})`,n.fillRect(0,0,t.width,t.height);for(let e=0;e<150;e++){const e=i[Math.floor(Math.random()*i.length)];n.fillStyle=e;const a=Math.random()*t.width,s=Math.random()*t.height,o=1+Math.floor(3*Math.random());n.fillRect(5*Math.floor(a/5),5*Math.floor(s/5),5*o,5*o)}}if(s.forEach((e=>{if(o>e.delay){if(m<.4){const t=a-e.x,n=c-e.y,i=Math.sqrt(t*t+n*n),s=4+15*m;i>5&&(e.x+=t/i*s,e.y+=n/i*s)}else if(m<.6){const t=e.x-a,n=e.y-c,i=Math.sqrt(t*t+n*n),s=Math.atan2(n,t)+.05;i>50?(e.x=.95*e.x+.05*a,e.y=.95*e.y+.05*c):(e.x=a+Math.cos(s)*i,e.y=c+Math.sin(s)*i)}else{const n=e.x-a,i=e.y-c,s=Math.sqrt(n*n+i*i),o=5+30*(m-.6);s<Math.max(t.width,t.height)&&(e.x+=n/(s||1)*o,e.y+=i/(s||1)*o)}const i=Math.sqrt(Math.pow(e.x-a,2)+Math.pow(e.y-c,2)),s=Math.max(t.width,t.height)/2,o=Math.max(0,1-i/s);n.fillStyle=((e,t)=>{const a=l(e);return`rgba(${a.r}, ${a.g}, ${a.b}, ${t})`})(e.color,e.opacity*o),n.fillRect(5*Math.floor(e.x/5),5*Math.floor(e.y/5),5*e.size,5*e.size)}})),o%2==0){n.fillStyle="rgba(0, 0, 0, 0.05)";for(let e=0;e<t.height;e+=15)n.fillRect(0,e,t.width,5)}for(let e=0;e<50;e++){const e=Math.random()*t.width,a=Math.random()*t.height,i=Math.random()>.8?2:1;Math.random(),n.fillStyle=Math.random()>.7?COLORS.light:COLORS.lightest,n.fillRect(5*Math.floor(e/5),5*Math.floor(a/5),5*i,5*i)}o++,o<75?requestAnimationFrame(r):(e.style.transition="opacity 0.2s",e.style.opacity="0",setTimeout((()=>{document.body.removeChild(e)}),250))};function l(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:{r:0,g:0,b:0}}requestAnimationFrame(r)}function startGame(){game.reset(),createAsteroids(GAME_CONFIG.initialAsteroids);const e=document.createElement("div");function t(e){if(!sound.context)return;const t=sound.context.createOscillator(),a=sound.context.createGain();t.type="sine",t.frequency.value=e,a.gain.value=.5,a.gain.exponentialRampToValueAtTime(.01,sound.context.currentTime+.2),t.connect(a),a.connect(sound.context.destination),t.start(),t.stop(sound.context.currentTime+.2)}e.style.position="absolute",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.fontSize="100px",e.style.color=COLORS.lightest,e.style.textShadow="4px 4px 0 "+COLORS.darkest,e.style.zIndex="90",e.style.opacity="0.8",e.style.pointerEvents="none",e.textContent="3",document.body.appendChild(e),document.getElementById("gameMenu").style.display="none",t(440),setTimeout((()=>{e.textContent="2",t(330),setTimeout((()=>{e.textContent="1",t(660),setTimeout((()=>{e.textContent="GO!",function(){if(!sound.context)return;const e=sound.context.createOscillator(),t=sound.context.createGain();e.type="square",e.frequency.value=220,t.gain.value=.6,t.gain.exponentialRampToValueAtTime(.01,sound.context.currentTime+.3),e.connect(t),t.connect(sound.context.destination),e.start(),e.stop(sound.context.currentTime+.3)}(),setTimeout((()=>{document.body.removeChild(e),requestAnimationFrame(gameLoop)}),800)}),1e3)}),1e3)}),1e3)}function createAsteroids(e){for(let t=0;t<e;t++){let e,t;Math.random()<.5?(e=Math.random()<.5?0:canvas.width,t=Math.random()*canvas.height):(e=Math.random()*canvas.width,t=Math.random()<.5?0:canvas.height);const a=.8+.2*game.difficulty;game.asteroids.push({x:e,y:t,size:30,dx:2*(Math.random()-.5)*a,dy:2*(Math.random()-.5)*a,angle:0,rotation:.1*(Math.random()-.5)*a})}}function spawnBlackHole(){const e=Date.now();if(!game.blackHole.active&&e-game.blackHole.spawnTime>game.blackHole.cooldown){const t=100;game.blackHole.x=t+Math.random()*(canvas.width-2*t),game.blackHole.y=t+Math.random()*(canvas.height-2*t),game.blackHole.active=!0,game.blackHole.spawnTime=e,setTimeout((()=>{game.restArea.active||(game.blackHole.active=!1)}),game.blackHole.duration)}}function renderBlackHole(){if(!game.blackHole.active)return;const e=ctx.createRadialGradient(game.blackHole.x,game.blackHole.y,.5*game.blackHole.radius,game.blackHole.x,game.blackHole.y,1.5*game.blackHole.radius);e.addColorStop(0,"rgba(255, 255, 255, 0.8)"),e.addColorStop(.5,"rgba(255, 255, 255, 0.3)"),e.addColorStop(1,"rgba(255, 255, 255, 0)"),ctx.fillStyle=e,ctx.beginPath(),ctx.arc(game.blackHole.x,game.blackHole.y,1.5*game.blackHole.radius,0,2*Math.PI),ctx.fill(),ctx.fillStyle="#0A0D0A",ctx.beginPath(),ctx.arc(game.blackHole.x,game.blackHole.y,game.blackHole.radius,0,2*Math.PI),ctx.fill();const t=2*Math.sin(Date.now()/400);ctx.fillStyle="#0A0D0A",ctx.beginPath(),ctx.arc(game.blackHole.x,game.blackHole.y,game.blackHole.radius+t,0,2*Math.PI),ctx.fill()}function checkBlackHoleEntry(){if(!game.blackHole.active||!game.ship)return;const e=game.ship.x-game.blackHole.x,t=game.ship.y-game.blackHole.y;if(Math.sqrt(e*e+t*t)<game.blackHole.radius){removeRestAreaInfoBox();const e=game.active;game.active=!1,createWarpTransition(),sound.play("warp"),setTimeout((()=>{game.restArea.active?exitRestArea():enterRestArea(),game.active=e,e&&requestAnimationFrame(gameLoop)}),750)}}function enterRestArea(){game.restArea.active=!0,game.restArea.infoBoxDismissed=!1,game.restArea.prevAsteroids=[...game.asteroids],game.asteroids=[],game.blackHole.x=Math.min(Math.max(game.blackHole.x,50),canvas.width-50),game.blackHole.y=Math.min(Math.max(game.blackHole.y,50),canvas.height-50);const e=.5*Math.PI,t=2*game.blackHole.radius+30;game.ship&&(game.ship.x=game.blackHole.x+Math.cos(e)*t,game.ship.y=game.blackHole.y+Math.sin(e)*t,game.ship.thrust.x=0,game.ship.thrust.y=0,game.ship.angle=e-Math.PI/2)}function exitRestArea(){removeRestAreaInfoBox(),game.restArea.active=!1,game.restArea.infoBoxDismissed=!1,game.restArea.prevAsteroids&&game.restArea.prevAsteroids.length>0?game.asteroids=[...game.restArea.prevAsteroids]:createAsteroids(GAME_CONFIG.initialAsteroids);const e=1.5*Math.PI,t=2*game.blackHole.radius+30;game.ship&&(game.ship.x=game.blackHole.x+Math.cos(e)*t,game.ship.y=game.blackHole.y+Math.sin(e)*t,game.ship.thrust.x=0,game.ship.thrust.y=0,game.ship.angle=e-Math.PI/2)}function renderEarth(){const e=game.restArea.earthSize,t=canvas.height-e-20,a=20+e/2,n=t+e/2,i=e/2,s=28*Math.PI/180,o=[];for(let s=t;s<t+e;s+=10)for(let t=20;t<20+e;t+=10)Math.sqrt(Math.pow(t+5-a,2)+Math.pow(s+5-n,2))<=i&&o.push({x:t,y:s,color:COLORS.darkest});const r=[.25,.4,.55,.7,.85];for(let e=0;e<o.length;e++){const t=o[e].x+5-a,l=o[e].y+5-n,c=(Math.cos(s),Math.sin(s),(t*Math.sin(s)+l*Math.cos(s)+i)/(2*i));let m=!1;for(let e=0;e<r.length;e++){const t=r[e];if(Math.abs(c-t)<.06){m=!0;break}}m?o[e].color=COLORS.light:(c>.15&&c<.35||c>.65&&c<.85)&&(o[e].color=COLORS.medium)}for(let e=0;e<o.length;e++)ctx.fillStyle=o[e].color,ctx.fillRect(o[e].x,o[e].y,10,10);game.restArea.active&&!game.restArea.infoBoxDismissed&&showRestAreaInfoBox()}function removeRestAreaInfoBox(){const e=document.getElementById("restAreaInfoBox");e&&document.body.removeChild(e)}function showRestAreaInfoBox(){return;game.restArea.infoBoxShownInSession=!0;const e=document.createElement("div");e.id="restAreaInfoBox",e.className="game-window",e.style.position="absolute",e.style.top="20px",e.style.left="50%",e.style.transform="translateX(-50%)",e.style.maxWidth="300px",e.style.width="calc(100% - 40px)",e.style.zIndex="90",e.style.border="8px solid #0F380F",e.style.background="#9BBC0F",e.style.padding="10px",e.style.boxShadow="inset 0 0 0 4px #8BAC0F, 6px 6px 0 rgba(0,30,0,.4)";const t=document.createElement("div");t.className="window-title",t.style.background="#0F380F",t.style.color="#9BBC0F",t.style.padding="5px 0",t.style.margin="-10px -10px 10px",t.style.fontSize="20px",t.style.letterSpacing="2px",t.style.textTransform="uppercase",t.style.textAlign="center",t.textContent="OUTER BELTS REST AREA",e.appendChild(t);const a=document.createElement("div");a.className="pixel-divider",a.style.display="block",a.style.height="4px",a.style.background="repeating-linear-gradient(to right, #0F380F 0, #0F380F 4px, #8BAC0F 4px, #8BAC0F 8px)",a.style.margin="10px 0",e.appendChild(a);const n=document.createElement("div");n.className="menu-text",n.style.color="#0F380F",n.style.margin="15px 0",n.style.fontSize="14px",n.style.lineHeight="1.2",n.style.textAlign="center",n.innerHTML="\n    THIS IS AN ASTEROID FREE ZONE.<br><br>\n    KATANU MINING CORP ACKNOWLEDGES<br>\n    YOUR NEED FOR RESPITE.<br><br>\n    RELAX AND LISTEN TO THE RADIO<br>\n    PRACTICE YOUR SKILLS<br>\n    RETURN THROUGH THE WORMHOLE<br>\n    TO CONTINUE YOUR IMPORTANT WORK.<br><br>\n    IDLE TIME IS A GIFT.\n  ",e.appendChild(n);const i=document.createElement("div");i.className="pixel-divider",i.style.display="block",i.style.height="4px",i.style.background="repeating-linear-gradient(to right, #0F380F 0, #0F380F 4px, #8BAC0F 4px, #8BAC0F 8px)",i.style.margin="10px 0",e.appendChild(i);const s=document.createElement("div");s.className="menu-item",s.style.display="flex",s.style.alignItems="center",s.style.justifyContent="center",s.style.margin="10px 0";const o=document.createElement("span");o.className="cursor",o.style.display="inline-block",o.style.marginRight="5px",o.style.animation="1s steps(2,start) infinite blink-animation",o.textContent=">",s.appendChild(o);const r=document.createElement("button");r.className="gameButton",r.style.padding="8px 16px",r.style.fontSize="16px",r.style.background="#8BAC0F",r.style.border="3px solid #0F380F",r.style.color="#0F380F",r.style.cursor="pointer",r.style.margin="5px",r.style.fontFamily='"Pixelify Sans", monospace',r.style.transition=".2s",r.style.textTransform="uppercase",r.textContent="ACKNOWLEDGE",r.onmouseover=function(){this.style.background="#306230",this.style.color="#9BBC0F"},r.onmouseout=function(){this.style.background="#8BAC0F",this.style.color="#0F380F"},r.onmousedown=function(){this.style.transform="translateY(1px)"},r.onmouseup=function(){this.style.transform="translateY(0)"},r.onclick=function(){window.sound&&window.sound.play("menu"),document.body.removeChild(e),game.restArea&&(game.restArea.infoBoxDismissed=!0)},s.appendChild(r),e.appendChild(s),document.body.appendChild(e)}let lastTime=0;function gameLoop(e){if(game.paused)return requestAnimationFrame(gameLoop);const t=e-lastTime||16;lastTime=e;const a=t/16.667;updateShip(a),updateBullets(a),updateAsteroids(a),updateLaser(a),updateBulletTrails(),updatePulsingStars(),Math.random()<.002&&game.active&&!game.restArea.active&&spawnBlackHole(),checkBlackHoleEntry(),checkCollisions(),game.updateDifficulty(),render(),game.active&&requestAnimationFrame(gameLoop)}function updateShip(e){if(!game.ship)return;if(game.keys.ArrowLeft&&(game.ship.angle-=.1*e),game.keys.ArrowRight&&(game.ship.angle+=.1*e),game.keys.ArrowUp){const t=.1*e;game.ship.thrust.x+=t*Math.cos(game.ship.angle),game.ship.thrust.y+=t*Math.sin(game.ship.angle),game.thrusterSound||(game.thrusterSound=sound.play("thrust"))}else{const t=Math.pow(.98,e);game.ship.thrust.x*=t,game.ship.thrust.y*=t,game.thrusterSound&&(game.thrusterSound.stop(),game.thrusterSound=null)}const t=5+game.difficulty,a=Math.sqrt(game.ship.thrust.x*game.ship.thrust.x+game.ship.thrust.y*game.ship.thrust.y);if(a>t){const e=t/a;game.ship.thrust.x*=e,game.ship.thrust.y*=e}game.ship.x+=game.ship.thrust.x*e,game.ship.y+=game.ship.thrust.y*e,game.ship.x<0&&(game.ship.x=canvas.width),game.ship.x>canvas.width&&(game.ship.x=0),game.ship.y<0&&(game.ship.y=canvas.height),game.ship.y>canvas.height&&(game.ship.y=0)}function updateLaser(e){game.active&&!game.paused&&(game.keys[" "]||game.laser.charge<game.laser.maxCharge&&(game.laser.charge+=game.laser.chargeRate*e,game.laser.charge>=game.laser.maxCharge&&(game.laser.charge=game.laser.maxCharge,game.laser.recharging=!1)),game.keys[" "]&&game.laser.charge>0&&fireBullet())}function fireBullet(){if(game.bullets.length>=GAME_CONFIG.maxBullets||game.laser.charge<=0)return;const e=30/(1+.3*(game.difficulty-1)),t=Date.now();if(t-game.laser.lastFireTime<e)return;game.laser.lastFireTime=t,game.lastPodFired=!game.lastPodFired;const a=game.lastPodFired?25:-30,n=game.ship.x+10*Math.cos(game.ship.angle)-Math.sin(game.ship.angle)*a,i=game.ship.y+10*Math.sin(game.ship.angle)+Math.cos(game.ship.angle)*a,s=game.ship.angle,o=8+game.laser.charge/game.laser.maxCharge*3;game.bullets.push({x:n,y:i,dx:o*Math.cos(s),dy:o*Math.sin(s),life:80,radius:3,color:COLORS.lightest,shotTime:t}),sound.play("laser"),triggerScreenShake(2,5),game.laser.charge-=game.laser.dischargeRate,game.laser.charge<0&&(game.laser.charge=0,game.laser.recharging=!0)}function updateBullets(e){for(let t=game.bullets.length-1;t>=0;t--){let a=game.bullets[t];if(a.x+=a.dx*e,a.y+=a.dy*e,Math.random()>.4){game.bulletTrails||(game.bulletTrails=[]);const e=a.x-.2*a.dx,t=a.y-.2*a.dy;game.bulletTrails.push({x:e,y:t,color:COLORS.light,life:8})}a.x<0&&(a.x=canvas.width),a.x>canvas.width&&(a.x=0),a.y<0&&(a.y=canvas.height),a.y>canvas.height&&(a.y=0),a.life-=e,a.life<=0&&game.bullets.splice(t,1)}}function updateBulletTrails(){if(game.bulletTrails)for(let e=game.bulletTrails.length-1;e>=0;e--){const t=game.bulletTrails[e];t.life--,t.life<=0&&game.bulletTrails.splice(e,1)}}function updatePulsingStars(){const e=Date.now()/1e3;game.pulsingStars.forEach((t=>{t.size=t.baseSize+Math.sin(e*t.pulse+t.phase)*t.baseSize*.5}))}function updateAsteroids(e){game.asteroids.forEach((t=>{t.x+=t.dx*e,t.y+=t.dy*e,t.angle+=t.rotation*e,t.x<-t.size&&(t.x=canvas.width+t.size),t.x>canvas.width+t.size&&(t.x=-t.size),t.y<-t.size&&(t.y=canvas.height+t.size),t.y>canvas.height+t.size&&(t.y=-t.size)}))}function checkCollisions(){if(game.ship){for(let e=game.bullets.length-1;e>=0;e--){let t=game.bullets[e];for(let a=game.asteroids.length-1;a>=0;a--){let n=game.asteroids[a],i=t.x-n.x,s=t.y-n.y;if(Math.sqrt(i*i+s*s)<n.size){if(game.bullets.splice(e,1),sound.play("explosion",{size:n.size/10}),triggerScreenShake(n.size/5,10),n.size>10){let e=n.size/2;const t=1+.2*(game.difficulty-1);for(let a=0;a<2;a++)game.asteroids.push({x:n.x,y:n.y,size:e,dx:4*(Math.random()-.5)*t,dy:4*(Math.random()-.5)*t,angle:0,rotation:.2*(Math.random()-.5)*t})}game.asteroids.splice(a,1),game.score+=GAME_CONFIG.asteroidPointValue*game.difficulty,0===game.asteroids.length&&(createAsteroids(GAME_CONFIG.initialAsteroids+Math.floor(2*(game.difficulty-1))),sound.play("levelUp"));break}}}if(game.ship&&!game.ship.invulnerable)for(let e=0;e<game.asteroids.length;e++){let t=game.asteroids[e],a=game.ship.x-t.x,n=game.ship.y-t.y;if(Math.sqrt(a*a+n*n)<t.size+24){game.thrusterSound&&(game.thrusterSound.stop(),game.thrusterSound=null),sound.play("explosion",{size:3,duration:.8}),triggerScreenShake(15,20),game.lives--,game.lives<=0?(game.active=!1,sound.play("gameOver"),document.getElementById("gameMenu").style.display="block",document.getElementById("startScreen").style.display="none",document.getElementById("gameOverScreen").style.display="block",document.getElementById("finalScore").textContent=`SCORE: ${game.score}`,document.getElementById("highScoreInput").value="",document.getElementById("highScoreInput").focus(),game.score>game.highScore&&(document.getElementById("finalScore").textContent+=" - NEW HIGH!",game.highScore=game.score,localStorage.setItem("rockBlasterHighScore",game.score)),fetchLeaderboard()):(game.ship.x=canvas.width/2,game.ship.y=canvas.height/2,game.ship.thrust={x:0,y:0},game.ship.invulnerable=!0,game.ship.blinkState=!0,game.ship.blinkInterval=setInterval((()=>{game.ship&&(game.ship.blinkState=!game.ship.blinkState)}),150),setTimeout((()=>{game.ship&&(game.ship.invulnerable=!1,clearInterval(game.ship.blinkInterval),game.ship.blinkState=!0)}),GAME_CONFIG.shipSpawnProtectionTime));break}}}}function fetchLeaderboard(){document.querySelectorAll(".leaderboard-row").forEach((e=>{e.querySelector(".initials").innerHTML='<div class="loading-spinner"></div>',e.querySelector(".score").textContent=""})),fetch("https://outerbelts.com/api/leaderboard.php").then((e=>e.json())).then((e=>{updateLeaderboardDisplay(e)})).catch((e=>{console.error("Error fetching leaderboard:",e),updateLeaderboardDisplay(JSON.parse(localStorage.getItem("rockBlasterScores")||"[]"))}))}function updateLeaderboardDisplay(e){const t=document.querySelectorAll(".leaderboard-row");for(let a=0;a<t.length;a++)a<e.length?(t[a].querySelector(".initials").textContent=e[a].initials,t[a].querySelector(".score").textContent=e[a].score):(t[a].querySelector(".initials").textContent="---",t[a].querySelector(".score").textContent="0")}function shareScore(){const e=document.getElementById("highScoreInput").value.toUpperCase()||"AAA",t=JSON.parse(localStorage.getItem("rockBlasterScores")||"[]");t.push({initials:e,score:game.score,date:(new Date).toISOString()}),t.sort(((e,t)=>t.score-e.score)),localStorage.setItem("rockBlasterScores",JSON.stringify(t.slice(0,10))),game.score>game.highScore&&(game.highScore=game.score,localStorage.setItem("rockBlasterHighScore",game.highScore)),fetch("https://outerbelts.com/api/leaderboard.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({initials:e,score:game.score})}).then((e=>e.json())).then((e=>{e.success&&updateLeaderboardDisplay(e.scores)})).catch((e=>{console.error("Error sending score to server:",e),updateLeaderboardDisplay(t)}));const a=`${e} scored ${game.score} points in ROCK BLASTER! Can you beat them?`;try{navigator.share?navigator.share({title:"ROCK BLASTER 8-BIT - Mining Simulation",text:a,url:window.location.href}):navigator.clipboard?navigator.clipboard.writeText(a+" "+window.location.href).then((()=>{alert("Score shared to clipboard!")})).catch((e=>{alert(a)})):alert(a)}catch(t){alert(`${e}: ${game.score} points in ROCK BLASTER 8-BIT!`)}}function render(){if(ctx.fillStyle=COLORS.space,ctx.fillRect(0,0,canvas.width,canvas.height),game.screenShake.duration>0){const e=game.screenShake.intensity*(game.screenShake.duration/game.screenShake.maxDuration),t=(2*Math.random()-1)*e,a=(2*Math.random()-1)*e;ctx.save(),ctx.translate(t,a),document.getElementById("uiContainer").style.transform=`translate(${t}px, ${a}px)`,game.screenShake.duration--}else game.screenShake.maxDuration>0&&(document.getElementById("uiContainer").style.transform="translate(0, 0)",game.screenShake.maxDuration=0);if(game.pulsingStars.forEach((e=>{ctx.fillStyle=e.color;const t=Math.max(.5,e.size);ctx.fillRect(Math.floor(e.x-t/2),Math.floor(e.y-t/2),Math.ceil(t),Math.ceil(t))})),renderBulletTrails(),game.restArea.active&&renderEarth(),game.blackHole.active&&renderBlackHole(),game.ship&&(!game.ship.invulnerable||game.ship.blinkState)){if(ctx.save(),ctx.translate(game.ship.x,game.ship.y),ctx.rotate(game.ship.angle),drawPixelShape([[15,-10],[15,10],[-10,15],[-15,10],[-15,-10],[-10,-15]],COLORS.darkest),drawPixelShape([[12,-6],[12,6],[-5,8],[-8,0],[-5,-8]],COLORS.medium),drawPixelShape([[10,-4],[10,4],[4,4],[0,0],[4,-4]],COLORS.light),drawPixelShape([[0,-20],[-5,-35],[-20,-35],[-25,-30],[-25,-15],[-15,-15],[-10,-18]],COLORS.darkest),drawPixelShape([[0,20],[-10,18],[-15,15],[-25,15],[-25,30],[-20,35],[-5,35]],COLORS.darkest),drawPixelShape([[-8,-22],[-12,-32],[-22,-32],[-22,-18],[-15,-18]],COLORS.medium),drawPixelShape([[-8,22],[-15,18],[-22,18],[-22,32],[-12,32]],COLORS.medium),drawPixelShape([[-15,-33],[-18,-33],[-18,-30],[-15,-30]],COLORS.light),drawPixelShape([[-15,30],[-18,30],[-18,33],[-15,33]],COLORS.light),game.keys.ArrowUp){const e=9,t=6,a=-15,n=20,i=Math.floor(Date.now()/100)%3;for(let s=0;s<t;s++){const o=e-2*s,r=-n/2+(n-2*o)/2;for(let e=0;e<o;e++){const n=a-5-3*s,l=r+2*e,c=Math.abs(e-o/2)/(o/2),m=s/t;let h;h=c<.3&&m<.4?COLORS.lightest:c<.6&&m<.7?COLORS.light:COLORS.medium,(e+s)%3===i&&(h===COLORS.medium?h=COLORS.light:h===COLORS.light&&(h=COLORS.lightest)),Math.random()>.9&&(h===COLORS.lightest?h=COLORS.light:h===COLORS.light&&(h=COLORS.medium)),drawPixel(n,l,2,h)}}}ctx.restore()}renderBullets(),game.restArea.active||game.asteroids.forEach((e=>{ctx.save(),ctx.translate(e.x,e.y),ctx.rotate(e.angle);let t=[];for(let a=0;a<8;a++){let n=a/8*Math.PI*2,i=Math.cos(n)*e.size,s=Math.sin(n)*e.size;t.push([i,s])}if(drawPixelShape(t,"#3A3A3A"),!e.craters){e.craters=[];for(let t=0;t<3;t++)e.craters.push({angle:Math.random()*Math.PI*2,dist:.2*e.size+Math.random()*e.size*.3,size:.1*e.size+Math.random()*e.size*.1})}e.craters.forEach((e=>{const t=Math.cos(e.angle)*e.dist,a=Math.sin(e.angle)*e.dist;ctx.fillStyle="#222222",ctx.beginPath(),ctx.arc(t,a,e.size,0,2*Math.PI),ctx.fill()})),ctx.restore()})),ctx.fillStyle=COLORS.lightest,ctx.font='20px "Pixelify Sans", monospace',ctx.fillText(`SCORE: ${game.score}`,20,30),ctx.fillText(`LIVES: ${game.lives}`,20,60),ctx.fillText(`HIGH: ${game.highScore}`,canvas.width-150,30),renderLaserCharge(),(game.screenShake.duration>0||0===game.screenShake.duration&&game.screenShake.maxDuration>0)&&(ctx.restore(),0===game.screenShake.duration&&(game.screenShake.maxDuration=0))}function renderBulletTrails(){if(game.bulletTrails)for(let e=0;e<game.bulletTrails.length;e++){const t=game.bulletTrails[e];drawPixel(t.x,t.y,2,t.color)}}function renderBullets(){game.bullets.forEach((e=>{drawPixel(e.x,e.y,4,e.color||COLORS.darkest)}))}function renderLaserCharge(){const e=90;ctx.fillStyle=COLORS.darkest,ctx.fillRect(18,e-2,104,10),ctx.fillStyle=COLORS.lightest,ctx.fillRect(20,e,100,6);const t=game.laser.charge/game.laser.maxCharge;ctx.fillStyle=game.laser.recharging?COLORS.darkest:COLORS.medium,ctx.fillRect(20,e,Math.floor(100*t),6),ctx.fillStyle=COLORS.lightest,ctx.font='12px "Pixelify Sans", monospace',ctx.fillText("LASER",20,e-5)}function drawPixel(e,t,a,n){let i=Math.floor(e/game.pixelSize)*game.pixelSize,s=Math.floor(t/game.pixelSize)*game.pixelSize;ctx.fillStyle=n,ctx.fillRect(i,s,a*game.pixelSize,a*game.pixelSize)}function drawPixelShape(e,t){ctx.fillStyle=t,ctx.beginPath();for(let t=0;t<e.length;t++){let a=Math.floor(e[t][0]/game.pixelSize)*game.pixelSize,n=Math.floor(e[t][1]/game.pixelSize)*game.pixelSize;0===t?ctx.moveTo(a,n):ctx.lineTo(a,n)}ctx.closePath(),ctx.fill()}function restartGame(){document.getElementById("gameMenu").style.display="none",startGame()}function startGameWithPreloader(){const e=document.createElement("div");e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.backgroundColor=COLORS.space,e.style.zIndex="1000",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center";const t=document.createElement("div");t.style.padding="20px",t.style.backgroundColor=COLORS.darkest,t.style.border="4px solid "+COLORS.light;const a=document.createElement("div");a.innerHTML="BUILDING YOUR SHIP...",a.style.color=COLORS.lightest,a.style.fontFamily='"Pixelify Sans", monospace',a.style.fontSize="24px",a.style.textAlign="center",t.appendChild(a),e.appendChild(t),document.body.appendChild(e);const n=document.getElementById("gameMenu");n&&(n.style.visibility="hidden"),setTimeout((()=>{document.body.removeChild(e),n&&(n.style.visibility="visible"),init()}),800)}startGameWithPreloader(),setTimeout((()=>{const e=document.createElement("audio");e.volume=.3,e.src="https://streams.fluxfm.de/Chillhop/mp3-128/streams.fluxfm.de/",e.preload="auto",e.loop=!0,e.setAttribute("data-nokeys","true"),e.style.display="none",document.body.appendChild(e);const t=document.createElement("button");t.className="radio-button",t.type="button",t.setAttribute("tabindex","-1"),t.style.pointerEvents="auto";const a=document.createElement("span");a.className="";a.style.cssText="display:inline-block;width:16px;height:10px;background-color:"+COLORS.darkest+";margin-right:5px;position:relative;border:1px solid "+COLORS.medium+";border-radius:1px;";const n=document.createElement("span");n.style.width="8px";n.style.height="8px";n.style.backgroundColor=COLORS.darkest;n.style.marginRight="5px";n.style.display="inline-block";const i=document.createElement("span");i.style.display="none";a.appendChild(i);t.appendChild(n),t.appendChild(document.createTextNode(" RADIO"));let s=!1;t.addEventListener("mousedown",(function(a){if(a.preventDefault(),a.stopPropagation(),s){e.pause(),s=!1,t.style.backgroundColor=COLORS.light,t.style.color=COLORS.darkest,n.style.backgroundColor=COLORS.darkest;}else{const a=e.play();void 0!==a&&a.then((()=>{s=!0,t.style.backgroundColor=COLORS.medium,t.style.color=COLORS.lightest,n.style.backgroundColor=COLORS.lightest;})).catch((e=>{console.error("Autoplay prevented:",e),alert("Click again to play music (autoplay blocked by browser)")}))}return!1})),t.addEventListener("keydown",(function(e){return e.preventDefault(),e.stopPropagation(),!1}),!0),document.getElementById("uiContainer").appendChild(t)}),2e3);
</script>
</body>
</html>